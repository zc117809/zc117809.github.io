<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.5"><title>各种网站的爬取 | Simple</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">各种网站的爬取</h1><a id="logo" href="/.">Simple</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">各种网站的爬取</h1><div class="post-meta"><a href="/2019/11/10/%E5%90%84%E7%A7%8D%E7%BD%91%E7%AB%99%E7%9A%84%E7%88%AC%E5%8F%96/#comments" class="comment-count"></a><p><span class="date">Nov 10, 2019</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="爬取拉勾网"><a href="#爬取拉勾网" class="headerlink" title="爬取拉勾网"></a>爬取拉勾网</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 爬拉钩</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://www.lagou.com/jobs/positionAjax.json?needAddtionalResult=false'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求体的内容</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'first'</span>: <span class="string">'true'</span>,</span><br><span class="line">    <span class="string">'pn'</span>: <span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'kd'</span>: <span class="string">'python'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.24 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'referer'</span>: <span class="string">'https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput='</span>,</span><br><span class="line">    <span class="string">'accept'</span>: <span class="string">'application/json, text/javascript, */*; q=0.01'</span>,&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 原始的url</span></span><br><span class="line">urls = <span class="string">'https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput='</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立session</span></span><br><span class="line">s = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取搜索页的cookies</span></span><br><span class="line">s.get(urls,headers=header,timeout=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为此次获取的cookices</span></span><br><span class="line">cookie =s.cookies</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取本次的文本</span></span><br><span class="line">response = s.post(url, data=data,headers=header,cookies=cookie,timeout=<span class="number">5</span>).text</span><br><span class="line">print(response)</span><br></pre></td></tr></table></figure>



<p>首先我们要发送一个get请求<code>https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput=</code>，获取到它的cookie,带着cookie发送post请求’<code>https://www.lagou.com/jobs/positionAjax.json?needAddtionalResult=false</code></p>
<h2 id="爬取17k小说网"><a href="#爬取17k小说网" class="headerlink" title="爬取17k小说网"></a>爬取17k小说网</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">res = requests.get(<span class="string">'https://www.17k.com/list/3130396.html'</span>)</span><br><span class="line">soup = BeautifulSoup(res.text, <span class="string">'lxml'</span>)</span><br><span class="line">div = soup.find(class_=<span class="string">'Main'</span>)</span><br><span class="line">dd = div.find(name=<span class="string">'dd'</span>)</span><br><span class="line">a_list = dd.find_all(name=<span class="string">'a'</span>)</span><br><span class="line">a_url_list = []</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> a_list:</span><br><span class="line">    a = a[<span class="string">'href'</span>]</span><br><span class="line">    a_url = <span class="string">'https://www.17k.com'</span> + a</span><br><span class="line">    a_url_list.append(a_url)</span><br><span class="line"><span class="comment"># print(a_url_list)</span></span><br><span class="line"><span class="keyword">for</span> navel <span class="keyword">in</span> a_url_list:</span><br><span class="line"></span><br><span class="line">    res1 = requests.get(navel)</span><br><span class="line">    res1.encoding = res.apparent_encoding <span class="comment"># 解决乱码</span></span><br><span class="line">    soup1 = BeautifulSoup(res1.text,<span class="string">'lxml'</span>)</span><br><span class="line">    navel_div = soup1.find(class_=<span class="string">'readAreaBox'</span>)</span><br><span class="line"></span><br><span class="line">    navel_title = navel_div.find(name=<span class="string">'h1'</span>).text  <span class="comment"># 小说标题</span></span><br><span class="line"></span><br><span class="line">    navel_p_list = navel_div.find_all(name=<span class="string">'p'</span>)</span><br><span class="line">    <span class="comment"># navel_content_list_str = ''</span></span><br><span class="line">    <span class="keyword">for</span> navel_content <span class="keyword">in</span> navel_p_list:</span><br><span class="line"></span><br><span class="line">        navel_content_list = navel_content.text</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">f'<span class="subst">&#123;navel_title&#125;</span>.md'</span>,<span class="string">'at'</span>,encoding=<span class="string">'utf-8'</span>)<span class="keyword">as</span> f:</span><br><span class="line"></span><br><span class="line">            f.write(<span class="string">f'<span class="subst">&#123;navel_content_list&#125;</span>'</span>+<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    print(navel_title)</span><br></pre></td></tr></table></figure>



<h2 id="爬肯德基门店"><a href="#爬肯德基门店" class="headerlink" title="爬肯德基门店"></a>爬肯德基门店</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'cname'</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="string">'pid'</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">'keyword'</span>: <span class="string">'浦东'</span>,</span><br><span class="line">    <span class="string">'pageIndex'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'pageSize'</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line">ret = requests.post(<span class="string">'http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=keyword'</span>, data=data, headers=header)</span><br><span class="line">print(ret.json())</span><br></pre></td></tr></table></figure>

<h2 id="爬糗事百科段子"><a href="#爬糗事百科段子" class="headerlink" title="爬糗事百科段子"></a>爬糗事百科段子</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">ret=requests.get(<span class="string">'https://www.qiushibaike.com/text/page/2/'</span>)</span><br><span class="line"><span class="comment"># print(ret.text)</span></span><br><span class="line"></span><br><span class="line">soup=BeautifulSoup(ret.text,<span class="string">'html.parser'</span>)</span><br><span class="line"></span><br><span class="line">article_list=soup.find_all(class_=<span class="string">'article'</span>)</span><br><span class="line"><span class="comment"># print(article_list)</span></span><br><span class="line"><span class="keyword">for</span> article <span class="keyword">in</span> article_list:</span><br><span class="line">    content=article.find(class_=<span class="string">'content'</span>).text</span><br><span class="line">    print(content)</span><br><span class="line">    print(<span class="string">'-------'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="爬取京东商品信息"><a href="#爬取京东商品信息" class="headerlink" title="爬取京东商品信息"></a>爬取京东商品信息</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 模拟键盘输入</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line">bro=webdriver.Chrome(executable_path=<span class="string">'./chromedriver.exe'</span>)</span><br><span class="line"><span class="comment"># 设置隐士等待</span></span><br><span class="line">bro.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_goods_info</span><span class="params">(bro)</span>:</span></span><br><span class="line">    <span class="comment"># li_list=bro.find_element_by_class_name('gl-warp').find_elements_by_tag_name('li')</span></span><br><span class="line">    <span class="comment"># goods=bro.find_elements_by_class_name('gl-item')</span></span><br><span class="line">    goods = bro.find_elements_by_css_selector(<span class="string">'.gl-item'</span>)</span><br><span class="line">    <span class="comment"># print(len(goods))</span></span><br><span class="line">    <span class="keyword">for</span> good <span class="keyword">in</span> goods:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            price = good.find_element_by_css_selector(<span class="string">'.p-price i'</span>).text</span><br><span class="line">            name = good.find_element_by_css_selector(<span class="string">'.p-name em'</span>).text</span><br><span class="line">            url = good.find_element_by_css_selector(<span class="string">'.p-img a'</span>).get_attribute(<span class="string">'href'</span>)</span><br><span class="line">            commits = good.find_element_by_css_selector(<span class="string">'.p-commit strong&gt;a'</span>).text</span><br><span class="line">            photo_url = good.find_element_by_css_selector(<span class="string">'.p-img img'</span>).get_attribute(<span class="string">'src'</span>)</span><br><span class="line"></span><br><span class="line">            print(<span class="string">'''</span></span><br><span class="line"><span class="string">            商品名字：%s</span></span><br><span class="line"><span class="string">            商品价格：%s</span></span><br><span class="line"><span class="string">            商品地址：%s</span></span><br><span class="line"><span class="string">            商品评论数：%s</span></span><br><span class="line"><span class="string">            商品图片地址：%s</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">            '''</span> % (name, price, url, commits, photo_url))</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    next_button = bro.find_element_by_partial_link_text(<span class="string">'下一页'</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    next_button.click()</span><br><span class="line"></span><br><span class="line">    get_goods_info(bro)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    bro.get(<span class="string">'https://www.jd.com/'</span>)</span><br><span class="line"></span><br><span class="line">    input_k=bro.find_element_by_id(<span class="string">'key'</span>)</span><br><span class="line"></span><br><span class="line">    input_k.send_keys(<span class="string">'奶牛'</span>)</span><br><span class="line">    <span class="comment"># 模拟键盘的回车键</span></span><br><span class="line">    input_k.send_keys(Keys.ENTER)</span><br><span class="line">    get_goods_info(bro)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    bro.close()</span><br></pre></td></tr></table></figure>

<h2 id="自动登录12306"><a href="#自动登录12306" class="headerlink" title="自动登录12306"></a>自动登录12306</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment">#pillow</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入超级鹰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> chaojiying <span class="keyword">import</span> Chaojiying_Client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line">bro=webdriver.Chrome(executable_path=<span class="string">'./chromedriver.exe'</span>)</span><br><span class="line">bro.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    bro.get(<span class="string">'https://kyfw.12306.cn/otn/resources/login.html'</span>)</span><br><span class="line">    bro.maximize_window()  <span class="comment"># 窗口最大化，全屏</span></span><br><span class="line">    button_z=bro.find_element_by_css_selector(<span class="string">'.login-hd-account a'</span>)</span><br><span class="line">    button_z.click()</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 截取整个屏幕</span></span><br><span class="line">    bro.save_screenshot(<span class="string">'./main.png'</span>)</span><br><span class="line">    <span class="comment"># 验证码的位置和大小</span></span><br><span class="line">    img_t=bro.find_element_by_id(<span class="string">'J-loginImg'</span>)</span><br><span class="line">    print(img_t.size)</span><br><span class="line">    print(img_t.location)</span><br><span class="line"></span><br><span class="line">    size=img_t.size</span><br><span class="line">    location=img_t.location</span><br><span class="line"></span><br><span class="line">    img_tu = (int(location[<span class="string">'x'</span>]), int(location[<span class="string">'y'</span>]), int(location[<span class="string">'x'</span>] + size[<span class="string">'width'</span>]), int(location[<span class="string">'y'</span>] + size[<span class="string">'height'</span>]))</span><br><span class="line">    <span class="comment"># # 抠出验证码</span></span><br><span class="line">    <span class="comment"># #打开</span></span><br><span class="line">    img = Image.open(<span class="string">'./main.png'</span>)</span><br><span class="line">    <span class="comment"># 抠图</span></span><br><span class="line">    fram = img.crop(img_tu)</span><br><span class="line">    <span class="comment"># 截出来的小图</span></span><br><span class="line">    fram.save(<span class="string">'code.png'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 调用超级鹰破解</span></span><br><span class="line">    chaojiying = Chaojiying_Client(<span class="string">'306334678'</span>, <span class="string">'lqz12345'</span>, <span class="string">'903641'</span>)	<span class="comment">#用户中心&gt;&gt;软件ID 生成一个替换 96001</span></span><br><span class="line">    im = open(<span class="string">'code.png'</span>, <span class="string">'rb'</span>).read()													<span class="comment">#本地图片文件路径 来替换 a.jpg 有时WIN系统须要//</span></span><br><span class="line">    <span class="comment"># print(chaojiying.PostPic(im, 9004))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 返回结果如果有多个 260,133|123，233,处理这种格式[[260,133],[123,233]]</span></span><br><span class="line">    res=chaojiying.PostPic(im, <span class="number">9004</span>)</span><br><span class="line">    print(res)</span><br><span class="line">    result=res[<span class="string">'pic_str'</span>]</span><br><span class="line"></span><br><span class="line">    all_list = []</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'|'</span> <span class="keyword">in</span> result:</span><br><span class="line">        list_1 = result.split(<span class="string">'|'</span>)</span><br><span class="line">        count_1 = len(list_1)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(count_1):</span><br><span class="line">            xy_list = []</span><br><span class="line">            x = int(list_1[i].split(<span class="string">','</span>)[<span class="number">0</span>])</span><br><span class="line">            y = int(list_1[i].split(<span class="string">','</span>)[<span class="number">1</span>])</span><br><span class="line">            xy_list.append(x)</span><br><span class="line">            xy_list.append(y)</span><br><span class="line">            all_list.append(xy_list)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x = int(result.split(<span class="string">','</span>)[<span class="number">0</span>])</span><br><span class="line">        y = int(result.split(<span class="string">','</span>)[<span class="number">1</span>])</span><br><span class="line">        xy_list = []</span><br><span class="line">        xy_list.append(x)</span><br><span class="line">        xy_list.append(y)</span><br><span class="line">        all_list.append(xy_list)</span><br><span class="line">    print(all_list)</span><br><span class="line">    <span class="comment"># 用动作链，点击图片</span></span><br><span class="line">    <span class="comment"># [[260,133],[123,233]]</span></span><br><span class="line">    <span class="keyword">for</span> a <span class="keyword">in</span> all_list:</span><br><span class="line">        x = a[<span class="number">0</span>]</span><br><span class="line">        y = a[<span class="number">1</span>]</span><br><span class="line">        ActionChains(bro).move_to_element_with_offset(img_t, x, y).click().perform()</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    username=bro.find_element_by_id(<span class="string">'J-userName'</span>)</span><br><span class="line">    username.send_keys(<span class="string">'306334678'</span>)</span><br><span class="line">    password=bro.find_element_by_id(<span class="string">'J-password'</span>)</span><br><span class="line">    password.send_keys(<span class="string">'lqz12345'</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    submit_login=bro.find_element_by_id(<span class="string">'J-login'</span>)</span><br><span class="line">    submit_login.click()</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    print(bro.get_cookies())</span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br><span class="line">    bro.get(<span class="string">'https://www.12306.cn/index/'</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    bro.close()</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><blockquote><p>原文作者: Simple</p><p>原文链接: <a href="http://yoursite.com/2019/11/10/各种网站的爬取/">http://yoursite.com/2019/11/10/各种网站的爬取/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2020/07/05/django-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%AC%94%E8%AE%B0/" class="pre">django-中间件笔记</a><a href="/2019/11/08/srapy%E7%9A%84%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8/" class="next">srapy的高级使用</a></div><div id="comments"><div id="container"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.5"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.5"></script><script>var gitalk = new Gitalk({
  clientID: '0166bf5540dd89613207',
  clientSecret: '3c34e343b2e8c0f24c9e069e9874e2a661bdd7a3',
  repo: 'git@github.com:zc117809/comment.git',
  owner: 'zc117809',
  admin: ['zc117809'],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-CN',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#爬取拉勾网"><span class="toc-text">爬取拉勾网</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#爬取17k小说网"><span class="toc-text">爬取17k小说网</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#爬肯德基门店"><span class="toc-text">爬肯德基门店</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#爬糗事百科段子"><span class="toc-text">爬糗事百科段子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#爬取京东商品信息"><span class="toc-text">爬取京东商品信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自动登录12306"><span class="toc-text">自动登录12306</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/django-csrf%20%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/">django-csrf 跨站请求伪造</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/%E5%89%8D%E7%AB%AF%E4%B9%8BCSS/">前端之CSS</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/django-cookie%20%E5%92%8Csession/">django-cookie 和session</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/mysql-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/">mysql-存储引擎</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/django-%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/">django-批量插入</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/%E7%94%B1django%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BC%95%E5%8F%91%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/">由django中间件引发的编程思想</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/05/bbs/">bbs</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/05/django-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%AC%94%E8%AE%B0/">django-中间件笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/10/%E5%90%84%E7%A7%8D%E7%BD%91%E7%AB%99%E7%9A%84%E7%88%AC%E5%8F%96/">各种网站的爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/08/srapy%E7%9A%84%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8/">srapy的高级使用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/drf/" style="font-size: 15px;">drf</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">20</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Simple.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c5fd96eee1193585be191f318c3fa725";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>